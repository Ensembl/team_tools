#!/bin/sh

#  This is a perlcritic wrapper.  It is used by anacode-perlcritic.el.

#  usage: anacode_perlcritic <severity>
#    <severity>: the severity of criticism.  An integer between 1
#      (gentle) and 5 (brutal) inclusive.

#  We silence some warnings that generate much noise of little use.

#  We read the source from STDIN so that perlcritic does not report
#  the path.  This saves space when displaying the output in the Emacs
#  echo region.  Note that the Emacs buffer displays the file name
#  anyway so it is no loss not to see it a second time.

severity=$1

perlcritic \
    --severity "$severity" \
    --exclude 'RegularExpressions::RequireExtendedFormatting' \
    --exclude 'ErrorHandling::RequireCarping' \
